# File: common.adsl.yaml
# Contains common types shared across multiple services.
types:
  # --- Crypto, Keys, and Signatures ---
  Key:
    abstract: true
  KeySymmetric:
    abstract: true
    parent: Key
  KeyAsymmetric:
    abstract: true
    parent: Key
  KeyAsymmetricPublic:
    abstract: true
    parent: KeyAsymmetric
  KeyAsymmetricPrivate:
    abstract: true
    parent: KeyAsymmetric
  KeySign:
    abstract: true
    parent: Key
  KeySignPublic:
    abstract: true
    parent: KeySign
  KeySignPrivate:
    abstract: true
    parent: KeySign
  SodiumChacha20Poly1305:
    id: 6 # Re-based from 0
    parent: KeySymmetric
    fields:
      data: byte[32]
  HydrogenCurvePrivate:
    id: 1 # Re-based from 0
    parent: KeyAsymmetricPrivate
    fields:
      data: byte[32]
  HydrogenCurvePublic:
    id: 2 # Re-based from 0
    parent: KeyAsymmetricPublic
    fields:
      data: byte[32]
  HydrogenSecretBox:
    id: 3 # Re-based from 0
    parent: KeySymmetric
    fields:
      data: byte[32]
  SodiumCurvePublic:
    id: 8 # Re-based from 0
    parent: KeyAsymmetricPublic
    fields:
      data: byte[32]
  SodiumCurvePrivate:
    id: 7 # Re-based from 0
    parent: KeyAsymmetricPrivate
    fields:
      data: byte[32]
  SodiumSignPrivate:
    id: 9 # Re-based from 0
    parent: KeySignPrivate
    fields:
      data: byte[64]
  SodiumSignPublic:
    id: 10 # Re-based from 0
    parent: KeySignPublic
    fields:
      data: byte[32]
  HydrogenSignPrivate:
    id: 4 # Re-based from 0
    parent: KeySignPrivate
    fields:
      data: byte[64]
  HydrogenSignPublic:
    id: 5 # Re-based from 0
    parent: KeySignPublic
    fields:
      data: byte[32]
  Sign:
    abstract: true
  SignAE_ED25519:
    id: 1 # Re-based from 0
    parent: Sign
    fields:
      data: byte[64]
  SignHYDROGEN:
    id: 2 # Re-based from 0
    parent: Sign
    fields:
      data: byte[64]
  SignedKey:
    fields:
      key: Key
      sign: Sign
  CryptoLib:
    enum:
      - SODIUM
      - HYDROGEN

  # --- Proof of Work ---
  PowMethod:
    enum:
      - AE_BCRYPT_CRC32
  WorkProofConfig:
    abstract: true
  WorkProofBCrypt:
    id: 1 # Re-based from 0
    parent: WorkProofConfig
    fields:
      costBCrypt: byte
      poolSize: byte
      maxHashVal: int
  WorkProofDTO:
    fields:
      salt: String
      suffix: String
      poolSize: byte
      maxHashVal: int
      globalKey: SignedKey

  # --- Networking & Addressing ---
  IPAddress:
    abstract: true
  # Base type for IP addresses
  IPAddressV4:
    id: 1 # Re-based from 0
    parent: IPAddress
    fields:
      data: byte[4]
  IPAddressV6:
    id: 2 # Re-based from 0
    parent: IPAddress
    fields:
      data: byte[6]
  AetherCodec:
    enum:
      - TCP
      - UDP
      - WS
      - WSS
  CoderAndPort:
    fields:
      codec: AetherCodec
      port: short
  IPAddressAndPorts:
    fields:
      address: IPAddress
      coderAndPorts: CoderAndPort[]
  IPAddressAndPortsList:
    fields:
      addresses: IPAddressAndPorts[]

  # --- Descriptors ---
  ServerDescriptor:
    fields:
      id: short
      ipAddress: IPAddressAndPortsList

  # --- Generic Data Structures ---
  Cloud:
    fields:
      data: short[]

  # --- MoneyOperation types based on Java classes ---
  Status:
    enum: # NOTE: Enum values are placeholders, please review.
      - PENDING
      - COMPLETED
      - FAILED
  MoneyOperation:
    fields:
      id: long
      from: uuid
      to: uuid
      amount: long
      time: long
      credit: boolean
      status: Status

  # MODIFIED: Updated to match AccessGroup.java
  AccessGroup:
    fields:
      owner: uuid
      id: long
      data: uuid[]
  UUIDAndCloud:
    fields:
      uid: uuid
      cloud: Cloud
  PairKeys:
    abstract: true
  PairKeysSign:
    id: 3 # Re-based from 0
    parent: PairKeys
    fields:
      privateKey: Key
      publicKey: Key
  PairKeysAsym:
    id: 1 # Re-based from 0
    parent: PairKeys
    fields:
      privateKey: Key
      publicKey: Key
  PairKeysAsymSigned:
    id: 2 # Re-based from 0
    parent: PairKeys
    fields:
      privateKey: Key
      publicKey: SignedKey

